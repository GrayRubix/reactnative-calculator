import React, {Component} from 'react';
import {
  StyleSheet,
  ScrollView,
  View,
  Text,
  FlatList,
  TouchableOpacity,
} from 'react-native';

class App extends Component {
  constructor(props) {
    this.state = {
      number: [
        ['1', '2', '3'],
        ['4', '5', '6'],
        ['7', '8', '9'],
        ['.', '0', '+'],
        ['=', 'C'],
      ],


      operation: [
        ['+', '-', '*', '/']
    ],

      display: '',
      result: '',
    };
  }

  onPress = (character) => {
    if (character == '=') {
      // alert('why')
      // this.setState({result:eval(this.state.display});
      this.setState({display:this.state.result});
     }
      else if (character== 'C'){
        this.setState({result:this.state.display});
        this.setState({display:''})
        // alert('why')
      }
      else {
        // alert('why')
        let tmp = this.state.display
        this.setState({display:this.state.display+character})
        this.setState({result:eval(this.state.display)})
      }


      }

      setColor=(index,i)=>{
        if(index==4&&i==0)
        return "blue"
        else if(index==4&&i==1)
        return "red"
        // else
        // return "#808080"
      }

render() {
  return(
    <>
    <View style={{ flex:4 , backgroundColor:'black'}} >
      <Text style={{fontSize:30, marginTop:'10%',color:'white'}}>{this.state.display}</Text>
      <Text style={{fontSize:30,marginTop:'10%',color:'white'}}>{this.state.result}</Text>
    </View>

    <View style={{flex:6,flexDirection:'column-reverse'}}>
    {
      this.state.number.map(
        (items,index)=> {
          return(
            <View key={index} style={{flex:1, flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#808080'}}>
               
               {
                  items.map(
                    (item,i)=>{
                      return(
                 <View key={i} style={{flex:1,justifyContent:'center',alignItems: 'center',backgroundColor:this.setColor(index,i)}}>
                    <Text onPress={()=> this.onPress(item)} style={{fontSize:30}}>{item}</Text>
                </View>  
      this.state.operation.map(
        (items,index)=> {
          return(
            <View key={index} style={{flex:1, flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#808080'}}>
               
               {
                  items.map(
                    (item,i)=>{
                      return(
                 <View key={i} style={{flex:1,justifyContent:'center',alignItems: 'center',backgroundColor:this.setColor(index,i)}}>
                    <Text onPress={()=> this.onPress(item)} style={{fontSize:30}}>{item}</Text>
                </View>                       
                      )
                    }
                  )
               }
        
               
            </View>
          )
        }
    )

      }
    </View> 
</>
    
//به دو صورت هم با if  هم با به صورت کاستوم
  )
}

}

// const styles = StyleSheet.create({
//   scrollView: {
//     backgroundColor: Colors.lighter,
//   },
//   engine: {
//     position: 'absolute',
//     right: 0,
//   },
//   body: {
//     backgroundColor: Colors.white,
//   },
//   sectionContainer: {
//     marginTop: 32,
//     paddingHorizontal: 24,
//   },
//   sectionTitle: {
//     fontSize: 24,
//     fontWeight: '600',
//     color: Colors.black,
//   },
//   sectionDescription: {
//     marginTop: 8,
//     fontSize: 18,
//     fontWeight: '400',
//     color: Colors.dark,
//   },
//   highlight: {
//     fontWeight: '700',
//   },
//   footer: {
//     color: Colors.dark,
//     fontSize: 12,
//     fontWeight: '600',
//     padding: 4,
//     paddingRight: 12,
//     textAlign: 'right',
//   },
// });

export default App;
